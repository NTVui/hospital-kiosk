extends ../../layouts/default.pug
include ../../mixins/filterStatus.pug
include ../../mixins/search.pug
include ../../mixins/pagination.pug
include ../../mixins/form-change-multi.pug
include ../../mixins/alert.pug
include ../../mixins/sort.pug

block main
    .page-header
        h1.page-title= pageTitle
        .card.mb-3  
            .card-header Bộ lọc và tìm kiếm 
                .card-body 
                    .row 
                        .col-6 
                            +filterStatus(filterStatus)
                        .col-6 
                            +search(keyword)

        .card.mb-3  
            .card-header Danh sách
                .card-body 
                    .row 
                        .col-8 
                            +form-change-multi(`${pathAdmin}/clinics/change-multi?_method=PATCH`, currentUrl)
                        .col-4
                            a(
                                href=`${pathAdmin}/clinics/create`
                                class="btn btn-outline-success"
                                ) + Thêm mới
            
        .card.mb-3  
            .card-header Sắp xếp 
                .card-body 
                    .row 
                        .col-4 
                            +sort()
            
        table(class="table table-hover table-bordered" checkbox-multi)
            thead
                tr
                    th
                        input(type='checkbox', name='checkall')
                    th STT
                    th Hình ảnh
                    th Tên phòng khám
                    th Mã phòng khám
                    th Vị trí
                    th Trạng thái
                    th Người tạo
                    th Người cập nhật
                    th Hành động
                             
            tbody
                each item, index in clinics 
                    tr 
                        td 
                            input(type="checkbox", name="id", value=item.id)
                        td #{pagination.limitItems*(pagination.currentPage - 1)+(index+1)}
                        td 
                            img(src=item.thumbnail, alt=item.tenPhongKham, width='100px')
                        td #{item.tenPhongKham}
                        td #{item.maPhongKham} 
                        td #{item.viTri}
                        td 
                            if item.status == 'active'
                                a(
                                    href="javascript:;"
                                    class="badge-status badge-status--active"
                                    button-change-status,
                                    data-status=item.status,
                                    data-id=item.id
                                ) Hoạt động 
                            else
                                a(
                                    href="javascript:;"
                                    class="badge-status badge-status--inactive"
                                    button-change-status,
                                    data-status=item.status,
                                    data-id=item.id) Tạm ngưng
                        td 
                            p Người tạo 
                        td 
                            p Người cập nhật 
                        td 
                            a.btn.btn-secondary.btn-sm(href=`${pathAdmin}/clinics/detail/`) Chi tiết
                            a.btn.btn-warning.btn-sm(href=`${pathAdmin}/clinics/edit/`) Sửa
                            button(
                            class="btn btn-danger btn-sm"
                            button-delete
                            data-id = item.id
                            ) Xóa
    +pagination(pagination)

    form#form-change-status(
    action='',
    method='POST',
    data-path=`${pathAdmin}/clinics/change-status`
    ) 

    form#form-delete-item(
        action='',
        method='POST',
        data-path=`${pathAdmin}/clinics/delete`
    )
    script(src='/admin/js/scripts.js') 