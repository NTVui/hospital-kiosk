extends ../../layouts/default.pug
include ../../mixins/alert.pug
include ../../mixins/progress-steps.pug

block main
  +progressbar(currentStep, 3)
  .container.my-5
    h2 üí≥ Thanh to√°n d·ªãch v·ª•

    form(method="POST", action=`/API/v1/kiosk/step-3/payment/${patient._id}`)
        input(type="hidden", name="clinicId", value=clinic._id)
        input(type="hidden", name="serviceId", value=service._id)
        h3.mt-4.mb-3 üí∞ Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n
            .grid.grid-cols-3.gap-3
                label.card
                    input(type="radio", name="method", value="cash")
                    .card-content
                        h4.card-title üíµ Ti·ªÅn m·∫∑t
                label.card
                    input(type="radio", name="method", value="vnpay")
                    .card-content
                        h4.card-title üí≥ VNPAY

        button.btn.btn-primary.mt-4(type="submit") X√°c nh·∫≠n thanh to√°n

  script.
    form.addEventListener("submit", function(e) {
        const selected = document.querySelector("input[name='serviceId']:checked");
        if (selected) {
            hiddenClinicId.value = selected.dataset.clinicId;
        } else {
            e.preventDefault();
            alert("Vui l√≤ng ch·ªçn d·ªãch v·ª•");
        }
    });